---
title: Environment Variables - Yamify
---

# Environment Variables

This guide documents all environment variables used in Yamify applications. Proper configuration of these variables is essential for ensuring your application functions correctly across different environments.

## Core Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `NODE_ENV` | Yes | `development` | Defines the application environment. Values: `development`, `test`, `production` |
| `NEXT_PUBLIC_SITE_URL` | Yes | None | The full URL of your application (e.g., `https://example.com`) |
| `NEXT_PUBLIC_API_URL` | Yes | None | The URL of your API (e.g., `https://api.example.com` or `/api`) |

## Authentication Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `AUTH_SECRET` | Yes | None | A secret key used to sign JWT tokens. Must be at least 32 characters long |
| `AUTH_EXPIRES_IN` | No | `86400` | JWT token expiration time in seconds (default: 24 hours) |
| `REFRESH_TOKEN_EXPIRES_IN` | No | `604800` | Refresh token expiration time in seconds (default: 7 days) |

### OAuth Providers

#### Google OAuth

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `GOOGLE_CLIENT_ID` | For Google OAuth | None | Google OAuth Client ID |
| `GOOGLE_CLIENT_SECRET` | For Google OAuth | None | Google OAuth Client Secret |
| `GOOGLE_REDIRECT_URI` | For Google OAuth | None | Redirect URI for Google OAuth callback |

#### GitHub OAuth

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `GITHUB_CLIENT_ID` | For GitHub OAuth | None | GitHub OAuth Client ID |
| `GITHUB_CLIENT_SECRET` | For GitHub OAuth | None | GitHub OAuth Client Secret |
| `GITHUB_REDIRECT_URI` | For GitHub OAuth | None | Redirect URI for GitHub OAuth callback |

## Database Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `DATABASE_URL` | Yes | None | Connection string for your database |
| `DATABASE_CONNECTION_LIMIT` | No | `10` | Maximum number of connections in the database pool |

## Caching Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `REDIS_URL` | For Redis caching | None | Connection string for Redis (e.g., `redis://username:password@host:port`) |
| `CACHE_TTL` | No | `3600` | Default cache TTL in seconds |

## Email Service Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `SMTP_HOST` | For email | None | SMTP server host |
| `SMTP_PORT` | For email | `587` | SMTP server port |
| `SMTP_USER` | For email | None | SMTP username |
| `SMTP_PASSWORD` | For email | None | SMTP password |
| `EMAIL_FROM` | For email | None | Default sender email address |

## File Storage Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `STORAGE_TYPE` | No | `local` | Storage type (`local`, `s3`, `cloudinary`) |
| `S3_BUCKET_NAME` | For S3 storage | None | AWS S3 bucket name |
| `S3_REGION` | For S3 storage | None | AWS S3 region |
| `S3_ACCESS_KEY` | For S3 storage | None | AWS S3 access key |
| `S3_SECRET_KEY` | For S3 storage | None | AWS S3 secret key |
| `CLOUDINARY_CLOUD_NAME` | For Cloudinary | None | Cloudinary cloud name |
| `CLOUDINARY_API_KEY` | For Cloudinary | None | Cloudinary API key |
| `CLOUDINARY_API_SECRET` | For Cloudinary | None | Cloudinary API secret |

## Monitoring and Analytics Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `SENTRY_DSN` | For Sentry | None | Sentry DSN for error tracking |
| `SENTRY_ENVIRONMENT` | For Sentry | Value of `NODE_ENV` | Environment name for Sentry |
| `ANALYTICS_ID` | For analytics | None | Analytics service ID (e.g., Google Analytics) |

## Rate Limiting Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `RATE_LIMIT_MAX` | No | `100` | Maximum number of requests per time window |
| `RATE_LIMIT_WINDOW_MS` | No | `60000` | Time window in milliseconds (default: 1 minute) |

## Feature Flags

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `FEATURE_COMMENTS` | No | `true` | Enable or disable comments feature |
| `FEATURE_NOTIFICATIONS` | No | `true` | Enable or disable notifications feature |
| `FEATURE_TEAMS` | No | `false` | Enable or disable teams feature |

## Environment Setup

### Development Environment

For local development, create a `.env.local` file in the project root:

```bash
# .env.local example for development
NODE_ENV=development
NEXT_PUBLIC_SITE_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000/api

# Authentication
AUTH_SECRET=your-development-auth-secret-at-least-32-chars

# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/yamify_dev
```

### Test Environment

For testing, create a `.env.test` file:

```bash
# .env.test example
NODE_ENV=test
NEXT_PUBLIC_SITE_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000/api

# Use a separate test database
DATABASE_URL=postgresql://postgres:password@localhost:5432/yamify_test
```

### Production Environment

In production, set environment variables through your hosting platform:

```bash
# Production environment variables example
NODE_ENV=production
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# Use strong, unique secrets in production
AUTH_SECRET=your-production-auth-secret-at-least-32-chars

# Use a managed database service
DATABASE_URL=postgresql://user:password@production-db-host:5432/yamify_prod
```

## Environment Variable Validation

Yamify provides a validation utility to ensure all required environment variables are properly set:

```typescript
// lib/env.ts
import { z } from 'zod';

const envSchema = z.object({
  NODE_ENV: z.enum(['development', 'test', 'production']),
  NEXT_PUBLIC_SITE_URL: z.string().url(),
  NEXT_PUBLIC_API_URL: z.string(),
  AUTH_SECRET: z.string().min(32),
  DATABASE_URL: z.string(),
  // Add other required variables as needed
});

type EnvVariables = z.infer<typeof envSchema>;

function validateEnv(): EnvVariables {
  const parsed = envSchema.safeParse(process.env);
  
  if (!parsed.success) {
    console.error('‚ùå Invalid environment variables:', parsed.error.flatten().fieldErrors);
    throw new Error('Invalid environment variables');
  }
  
  return parsed.data;
}

// Only validate in development and test to avoid crashing production
const env = process.env.NODE_ENV !== 'production' ? validateEnv() : process.env as EnvVariables;

export default env;
```

## Usage in Code

Using the validation utility above, you can safely access environment variables:

```typescript
// Using the validated environment variables
import env from '@/lib/env';

function getApiUrl() {
  return env.NEXT_PUBLIC_API_URL;
}

function getDatabaseUrl() {
  return env.DATABASE_URL;
}
```

## Security Best Practices

1. **Never commit `.env` files to version control**. Add them to your `.gitignore` file.

2. **Use different values for each environment**. Development, testing, and production should have separate configurations.

3. **Rotate secrets regularly**. Change sensitive values like `AUTH_SECRET` periodically.

4. **Use a secret manager** in production environments (AWS Secrets Manager, Google Secret Manager, etc.).

5. **Only expose what's necessary to the client**. Only variables prefixed with `NEXT_PUBLIC_` will be available in the browser.

## Troubleshooting

### Environment Variables Not Loading

If environment variables aren't loading properly:

1. Ensure the `.env` file is in the correct location (project root).
2. Verify variable names are exact (they're case-sensitive).
3. Restart your development server after changing environment variables.
4. Check for syntax errors in your `.env` file (no spaces around `=`, no quotes unless part of the value).

### Environment Variables in CI/CD

When using CI/CD pipelines:

1. Add secrets to your CI/CD provider's secrets manager.
2. Reference secrets in your workflow files (don't hardcode them).
3. Ensure environment variables are passed to the build step.

## Conclusion

Properly managing environment variables is essential for secure and flexible application deployment. Follow the guidelines in this document to ensure your Yamify application is correctly configured across all environments.

## Related Resources

- [Deployment Overview](/deployment/overview)
- [Security Best Practices](/development/security)
- [Database Configuration](/deployment/database-setup)
